<!DOCTYPE html>
<html>
  <head>
    <title>Hello, World!</title>
    <style type="text/css" media="all">
      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }

      html, body {
        position: relative;
        margin: 0 40px;
      }

      html{
        margin: 0 auto;
	border: 1px solid red;
	width:85%;
      }

      body{
	display: flex;
	justify-content: center;
	align-item: center;
      }
      
      .boxCarrosel {
        position: relative;
        width: 100%;
        margin: 0 auto;
        overflow: hidden;
        padding: 20px auto;
        
        .conteinerCarrosel {
          opacity: 1;
          display: flex;
          transition: transform 0.5s ease, opacity 0.5s ease;
          will-change: transform; /* Melhora o desempenho da animação */
          
          .grupoProdutos {
            display: flex; /* Exibe os 4 itens em linha */
            width: 100%; /* Largura total do grupo de 4 produtos */
            gap: 20px;
            padding: 10px;
            
            .contIframe {
              width: 365px; /* Largura de cada item */
              height: 520px; /* Altura de cada item */
              box-sizing: border-box;
              display: flex;
              justify-content: center;
              transition: box-shadow 0.5s ease;
              border-radius: 5px;
              
              iframe {
                width: 100%;
                height: 100%;
                border: none;
                object-fit: cover;
              }
            }
          }  
        }
        
        .hide{
          opacity: 0.5;
        }
      }
      
      #boxCarrosel_2{
        position: relative;
        width: 100%;
        margin: 0 auto;
        overflow: hidden;
        padding: 20px auto;
        
        .conteinerCarrosel {
          opacity: 1;
          display: flex;
          transition: transform 0.5s ease, opacity 0.5s ease;
          will-change: transform; /* Melhora o desempenho da animação */
          
          .grupoProdutos {
            display: flex; /* Exibe os 4 itens em linha */
            width: 100%; /* Largura total do grupo de 4 produtos */
            gap: 20px;
            padding: 10px;
            
            .contIframe {
              width: 365px; /* Largura de cada item */
              height: 520px; /* Altura de cada item */
              box-sizing: border-box;
              display: flex;
              justify-content: center;
              transition: box-shadow 0.5s ease;
              border-radius: 5px;
              
              iframe {
                width: 100%;
                height: 100%;
                border: none;
                object-fit: cover;
              }
            }
          }  
        }
        
        .hide{
          opacity: 0.5;
        }
      }

      button {
        position: absolute;
        top: 50%;
        background-color: transparent;
        border: none;
        padding: 5px;
        cursor: pointer;
        transform: translateY(-50%);
        z-index: 1;
        
        font-size: 36px;
        color: #6A3156;
        height: 150px;
        border-radius: 5px;
        transition: all 0.5s ease;
      }
      
      button:hover{
        color: #FF7A00;
      }
      
      .prev {
        left: -35px; /* Botão 'prev' fora do carrossel */
      }
      
      .next {
        right: -35px; /* Botão 'next' fora do carrossel */
      }     
      
      @media screen and (max-width: 760px){
        
        html, body {
          margin: 0;
        }
        
        .boxCarrosel{
          .conteinerCarrosel{
            .grupoProdutos{
              width: 200%;
              
              .contIframe{
                height: 580px;
                max-height: 100%;
              }
            }
          }
        }
        
        button {
          font-size: 25px;
          height: 80px;
        }
        
        .prev {
          left: 5px; /* Botão 'prev' fora do carrossel */
        }
        
        .next {
          right: 5px; /* Botão 'next' fora do carrossel */
        }   
      }
      
      @media screen and (max-width: 370px){
        
        html, body {
          margin: 0;
        }
 
        .boxCarrosel{
          .conteinerCarrosel{
            .grupoProdutos{
              width: 200%;
              gap: 0;
              margin: 0;
              padding: 0;
              
              .contIframe{
                height: 400px;
                
                margin: 0;
                padding: 0;
              }
            }
          }
        }
        
        button {
          position: absolute;
          top: 60%;
          background-color: transparent;
          border: none;
          padding: 5px;
          cursor: pointer;
          transform: translateY(-50%);
          z-index: 1;
          
          font-size: 20px;
          color: #6A3156;
          height: auto;
          border-radius: 5px;
          transition: all 0.5s ease;
          
          opacity: 0.5;
          
          border: 1px solid rgba(0, 0, 0, 0.5);
        }
      }

    </style>
  </head>
  <body>

    <div id="boxCarrosel_1" class="boxCarrosel">
      <div id="carousel" class="conteinerCarrosel">
      
        <!-- Primeiro Grupo de 4 Produtos -->
        <div class="grupoProdutos">
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
        </div>

        <!-- Segundo Grupo de 4 Produtos -->
        <div class="grupoProdutos">
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/offer/productOffer.html?id=1" scrolling="no"></iframe>
          </div>
        </div>

      </div>
      
    </div>
    
    <button id="prevBtn" class="prev">&#10094;</button>
    <button id="nextBtn" class="next">&#10095;</button>

  </body>
 
 <script type="text/javascript" charset="utf-8">
  document.addEventListener("DOMContentLoaded", function() {
    const carouselContainer = document.getElementById('carousel');
    let totalGroups = 2;  // Usando 'let' para permitir alterações
    let currentIndex = 0;
    
    // Função para ajustar o valor de totalGroups com base na largura da tela
    function adjustTotalGroups() {
      const screenWidth = window.innerWidth;
  
      // Lógica ajustada conforme sua solicitação
      if (screenWidth <= 480) {
        totalGroups = 4; // Quando a largura da tela for menor ou igual a 400px
      } else if (screenWidth <= 760) {
        totalGroups = 4; // Quando a largura da tela for maior que 400px e menor ou igual a 760px
      } else {
        totalGroups = 2; // Quando a largura da tela for maior que 760px
      }
  
      console.log("totalGroups ajustado para:", totalGroups); // Ver no console o valor de totalGroups
    }
  
    // Função para mover o carrossel
    let isAnimating = false;

    function moveCarousel() {
      if (isAnimating) return; // Evita animações simultâneas
    
      isAnimating = true;
    
      // Adiciona a classe 'hide' para reduzir a opacidade
      carouselContainer.classList.add('hide');
    
      // Espera o tempo de transição para a opacidade (500ms)
      setTimeout(() => {
        // Muda o grupo do carrossel
        const offset = -(currentIndex * 100);
        carouselContainer.style.transform = `translateX(${offset}%)`;
    
        // Depois que a transição do carrossel terminar, restaura a opacidade
        setTimeout(() => {
          // Restaura a opacidade de volta para 1
          carouselContainer.classList.remove('hide');
          isAnimating = false;
        }, 500); // Tempo para a transição de opacidade terminar
      }, 100); // Pequeno delay para garantir que a opacidade já tenha começado a reduzir
    }
    
    function nextItem() {
      if (currentIndex < totalGroups - 1) {
        currentIndex++;
      } else {
        currentIndex = 0;
      }
      moveCarousel();
    }
    
    function prevItem() {
      if (currentIndex > 0) {
        currentIndex--;
      } else {
        currentIndex = totalGroups - 1;
      }
      moveCarousel();
    }

  
    // Adicionando eventos aos botões de navegação
    document.getElementById('nextBtn').addEventListener('click', nextItem);
    document.getElementById('prevBtn').addEventListener('click', prevItem);
  
    // Inicializar o carrossel
    moveCarousel();
  
    // Passar automaticamente para o próximo grupo a cada 5 segundos (5000 milissegundos)
    setInterval(nextItem, 5000);

    // Ajustar o totalGroups sempre que a tela for redimensionada
    window.addEventListener('resize', adjustTotalGroups);

    // Ajuste inicial do totalGroups
    adjustTotalGroups();
  });
</script>

 
</html>