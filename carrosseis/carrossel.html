<!DOCTYPE html>
<html>
  <head>
    <title>Hello, World!</title>
    <style type="text/css" media="all">
      /* Zera os espaços de margem e preenchimento e aplica box-sizing em todo o conteúdo */
      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }

      /* Aplica a margem e posicionamento ao HTML e BODY */
      html, body {
        position: relative;
        margin: 0 40px;
      }

      /* Define a largura do HTML como 85% da tela e centraliza horizontalmente */
      html{
        margin: 0 auto;
        width:85%;
      }

      /* Define o estilo de layout para o BODY */
      body{
        display: flex;  /* Usando Flexbox para alinhamento */
        justify-content: center; /* Centraliza o conteúdo horizontalmente */
        align-items: center; /* Centraliza o conteúdo verticalmente */
      }
      
      /* Estilos para o container do carrossel */
      .boxCarrosel {
        position: relative;
        width: 100%;
        margin: 0 auto;
        overflow: hidden; /* Esconde o conteúdo fora da área do carrossel */
        padding: 20px auto;
        
        .conteinerCarrosel {
          opacity: 1;
          display: flex;  /* Exibe os grupos de produtos em linha */
          transition: transform 0.5s ease, opacity 0.5s ease;  /* Transição suave para o movimento */
          will-change: transform; /* Melhora a performance da animação */
          
          /* Estilos para cada grupo de produtos */
          .grupoProdutos {
            display: flex; /* Exibe os 4 itens em linha */
            width: 100%;
            gap: 10px;
            padding: 5px;
            
            /* Estilo de cada item dentro do carrossel */
            .contIframe {
              width: 360px; /* Largura de cada item */
              height: 515px; /* Altura de cada item */
              box-sizing: border-box;
              display: flex;
              justify-content: center;
              align-items: center;
              transition: box-shadow 0.5s ease;
              border-radius: 5px;
              margin: 10px auto;
              
              /* Estilo do iframe dentro de cada item do carrossel */
              iframe {
                display: flex;
                justify-content: center;
                align-items: center;
                width: 100%;
                height: 100%;
                border: none; /* Remove a borda do iframe */
                object-fit: cover; /* Faz o conteúdo do iframe se ajustar ao tamanho */
              }
            }
          }
        }
      }

      /* Classe para esconder os itens com opacidade reduzida */
      .hide{
        opacity: 0.5;
      }

      /* Estilos para os botões de navegação */
      button {
        position: absolute;
        top: 50%;  /* Posiciona os botões no meio verticalmente */
        background-color: transparent;
        border: none;
        padding: 5px;
        cursor: pointer;
        transform: translateY(-50%); /* Ajusta a posição para centralizar */
        z-index: 1; /* Coloca o botão acima do carrossel */
        font-size: 36px;
        color: #6A3156;
        height: 150px;
        border-radius: 5px;
        transition: all 0.5s ease;
      }
      
      button:hover{
        color: #FF7A00; /* Muda a cor do botão ao passar o mouse */
      }

      /* Estilo do botão de navegação à esquerda */
      .prev {
        left: -35px;
      }

      /* Estilo do botão de navegação à direita */
      .next {
        right: -35px;
      }

      /* Estilos responsivos para telas pequenas */
      @media screen and (max-width: 760px){
        html, body {
          margin: 0 auto;
          width: 100%;
        }
        
        .boxCarrosel{
          .conteinerCarrosel{
            margin: 0 auto;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
          }
          
          .grupoProdutos{
            width: 200%; /* Aumenta o tamanho do grupo para que mais itens sejam visíveis */
            display: flex;
            justify-content: center;
            align-items: center;
          }
        }
        
        /* Ajusta o tamanho dos botões */
        button {
          font-size: 25px;
          height: 80px;
        }
        
        .prev {
          left: 5px; /* Ajusta a posição do botão esquerdo */
        }
        
        .next {
          right: 5px; /* Ajusta a posição do botão direito */
        }
      }

      /* Estilos ainda mais responsivos para telas muito pequenas */
      @media screen and (max-width: 375px){
        html, body {
          margin: 0;
        }

        .boxCarrosel{
          .conteinerCarrosel{
            .grupoProdutos{
              width: 200%;
              gap: 0;
              margin: 0;
              padding: 0;
            }
          }
        }

        button {
          position: absolute;
          top: 60%;  /* Posiciona os botões mais para baixo */
          font-size: 20px;
          color: #6A3156;
          height: auto;
          border-radius: 5px;
          opacity: 0.5;
          border: 1px solid rgba(0, 0, 0, 0.5);
        }
      }
    </style>
  </head>
  <body>

    <!-- Container do carrossel -->
    <div id="boxCarrosel_1" class="boxCarrosel">
      <div id="carousel" class="conteinerCarrosel">
      
        <!-- Primeiro grupo de produtos (4 itens) -->
        <div class="grupoProdutos">
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=1" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=2" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=3" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=4" scrolling="no"></iframe>
          </div>
        </div>

        <!-- Segundo grupo de produtos (4 itens) -->
        <div class="grupoProdutos">
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=5" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=6" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=7" scrolling="no"></iframe>
          </div>
          <div class="contIframe">
            <iframe src="produtosCarrosseis/product/product.html?id=8" scrolling="no"></iframe>
          </div>
        </div>

      </div>
    </div>
    
    <!-- Botões de navegação -->
    <button id="prevBtn" class="prev">&#10094;</button>
    <button id="nextBtn" class="next">&#10095;</button>

  </body>

  <script type="text/javascript" charset="utf-8">
    // Script de controle do carrossel
    document.addEventListener("DOMContentLoaded", function() {
      const carouselContainer = document.getElementById('carousel');
      let totalGroups = 2;  // Número de grupos de produtos
      let currentIndex = 0;
      
      // Função que ajusta o número de grupos dependendo da largura da tela
      function adjustTotalGroups() {
        const screenWidth = window.innerWidth;
        if (screenWidth <= 375) {
          totalGroups = 2; // Para telas pequenas (<= 480px)
        } else if (screenWidth <= 760) {
          totalGroups = 2; // Para telas médias (<= 760px)
        } else {
          totalGroups = 2; // Para telas grandes
        }
        console.log("totalGroups ajustado para:", totalGroups); // Debugging
      }
    
      // Função para mover o carrossel
      let isAnimating = false;

      function moveCarousel() {
        if (isAnimating) return;  // Impede animações simultâneas
        isAnimating = true;
        carouselContainer.classList.add('hide');  // Torna o carrossel semi-transparente
    
        setTimeout(() => {
          const offset = -(currentIndex * 100);
          carouselContainer.style.transform = `translateX(${offset}%)`;  // Move o carrossel
    
          setTimeout(() => {
            carouselContainer.classList.remove('hide');
            isAnimating = false;
          }, 500);  // Espera a animação de opacidade terminar
        }, 100); // Pequeno delay
      }
    
      // Funções de navegação
      function nextItem() {
        if (currentIndex < totalGroups - 1) {
          currentIndex++;
        } else {
          currentIndex = 0; // Reinicia o carrossel
        }
        moveCarousel();
      }
    
      function prevItem() {
        if (currentIndex > 0) {
          currentIndex--;
        } else {
          currentIndex = totalGroups - 1; // Vai para o último grupo
        }
        moveCarousel();
      }

      // Adiciona eventos de clique nos botões
      document.getElementById('nextBtn').addEventListener('click', nextItem);
      document.getElementById('prevBtn').addEventListener('click', prevItem);
    
      // Inicializa o carrossel
      moveCarousel();
    
      // Passa automaticamente para o próximo grupo a cada 2 segundos
      setInterval(nextItem, 2000);

      // Ajusta o totalGroups ao redimensionar a tela
      window.addEventListener('resize', adjustTotalGroups);
      adjustTotalGroups();
    });
    
    // Script para enviar o tamanho da janela para os iframes
    document.addEventListener("DOMContentLoaded", function() {
      const iframes = document.querySelectorAll("iframe");
      function sendWindowSizeToIframes() {
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        iframes.forEach((iframe) => {
          iframe.contentWindow.postMessage({ width: windowWidth, height: windowHeight }, '*');
        });
      }
      sendWindowSizeToIframes();
      window.addEventListener('resize', sendWindowSizeToIframes);
    });
  </script>
</html>
